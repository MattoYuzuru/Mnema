# User Service (`backend/services/user`)

## Назначение

`user` хранит и обслуживает профильные данные пользователя:
- публичный/приватный профиль;
- персональные настройки аккаунта;
- операции над текущим пользователем (`/me`).

## Главные фичи

- CRUD по пользователям (`/users`);
- операции текущего пользователя (`/me`): получение/обновление/удаление;
- работа с аватаром через связку с media;
- проксирование некоторых account-действий в auth.

## Технологии

- Kotlin + Spring Boot 3.5;
- Spring Security Resource Server + method security;
- Spring Data JPA + PostgreSQL + Flyway;
- Redis cache;
- RestClient для межсервисных вызовов;
- Actuator + Prometheus, springdoc.

## Технические решения и паттерны

- BFF-подобная роль для профиля: часть операций агрегирует данные из `user`, `auth`, `media`.
- Кэш резолва медиа (например, avatar URL) через Redis с TTL.
- Явная авторизация на уровне сервиса через проверку владения профилем.
- Разделение контроллеров на общие `/users` и self-service `/me`.

## Связь с другими сервисами

- Валидирует JWT от `auth`.
- Вызывает `media` для резолва `avatarMediaId`.
- Вызывает `auth` для account-related действий (например удаление аккаунта).
- Используется фронтендом для страницы профиля и account settings.

