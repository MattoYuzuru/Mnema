import { Injectable } from '@angular/core';
import { BehaviorSubject, Observable } from 'rxjs';

export type Language = 'en' | 'ru';

interface Translations {
    [key: string]: string;
}

const translations: Record<Language, Translations> = {
    en: {
        'app.name': 'Mnema',
        'nav.myStudy': 'My Study',
        'nav.createDeck': 'Create Deck',
        'nav.login': 'Login',
        'nav.logout': 'Logout',
        'nav.profile': 'Profile',
        'nav.settings': 'Settings',
        'home.studyToday': 'Your Study Today',
        'home.yourDecks': 'Your Decks',
        'home.topPublicDecks': 'Top Public Decks',
        'home.viewAll': 'View all',
        'home.continueLearn': 'Continue Learning',
        'home.cardsDue': 'cards due',
        'home.new': 'new',
        'home.noDecksYet': 'No decks yet',
        'home.noDecksDescription': 'Create your first deck or fork a public deck to get started',
        'home.browsePublicDecks': 'Browse Public Decks',
        'home.noPublicDecks': 'No public decks available',
        'home.noPublicDecksDescription': 'Public decks will appear here once they are published',
        'button.learn': 'Learn',
        'button.browse': 'Browse',
        'button.fork': 'Fork Deck',
        'button.update': 'Update',
        'button.createDeck': 'Create Deck',
        'publicDecks.title': 'Public Decks',
        'publicDecks.subtitle': 'Discover and fork community-created flashcard decks',
        'publicDecks.searchPlaceholder': 'Search public decks...',
        'publicDecks.noArchivedDecks': 'No archived decks',
        'cardBrowser.title': 'Card Browser',
        'cardBrowser.cards': 'cards',
        'cardBrowser.list': 'List',
        'cardBrowser.cardsView': 'Cards',
        'cardBrowser.frontPreview': 'Front Preview',
        'cardBrowser.tags': 'Tags',
        'cardBrowser.previous': '← Previous',
        'cardBrowser.next': 'Next →',
        'cardBrowser.clickToFlip': 'Click card to flip',
        'cardBrowser.keyboardHint': 'Space flips the card, left/right arrows to navigate',
        'publicCardBrowser.publicDeck': 'Public Deck',
        'publicCardBrowser.cards': 'cards',
        'publicCardBrowser.frontPreview': 'Front Preview',
        'publicCardBrowser.noCards': 'No cards in this deck',
        'publicCardBrowser.noCardsDescription': 'This public deck doesn\'t have any cards yet',
        'cardBrowser.reviews': 'Reviews',
        'cardBrowser.nextReview': 'Next Review',
        'cardBrowser.status': 'Status',
        'cardBrowser.actions': 'Actions',
        'cardBrowser.active': 'Active',
        'cardBrowser.suspended': 'Suspended',
        'cardBrowser.editCard': 'Edit Card',
        'cardBrowser.deleteCard': 'Delete Card',
        'cardBrowser.deleteCardTitle': 'Delete card?',
        'cardBrowser.deleteCardMessage': 'This will remove the card from your deck.',
        'cardBrowser.confirmDelete': 'Delete',
        'cardBrowser.deleteScopeTitle': 'Delete Card',
        'cardBrowser.deleteScopeMessage': 'Delete this card for everyone in new versions, or only remove it from your deck?',
        'cardBrowser.deleteLocal': 'Only for me',
        'cardBrowser.deleteGlobal': 'For everyone (new versions)',
        'cardBrowser.backToDeck': '← Back to Deck',
        'cardBrowser.personalNote': 'Personal Note',
        'cardBrowser.suspendCard': 'Suspend this card (temporarily hide from reviews)',
        'cardBrowser.cancel': 'Cancel',
        'cardBrowser.save': 'Save',
        'cardBrowser.saving': 'Saving...',
        'nav.privacy': 'Privacy',
        'nav.terms': 'Terms',
        'footer.github': 'GitHub',
        'footer.docs': 'Docs',
        'memoryTips.tip1': 'Active recall strengthens neural pathways more than passive review.',
        'memoryTips.tip2': 'Spaced repetition leverages the spacing effect for optimal retention.',
        'memoryTips.tip3': 'Consistency is the bridge between goals and accomplishment.',
        'memoryTips.tip4': 'Ancient orators memorized hours of speeches through structured technique.',
        'memoryTips.tip5': 'Daily practice, even for 5 minutes, compounds over time.',
        'memoryTips.tip6': 'Memory is the treasury and guardian of all things.',
        'terms.title': 'Terms of Service',
        'terms.lastUpdated': 'Last updated: December 2025',
        'terms.acceptance': 'Acceptance of Terms',
        'terms.acceptanceText': 'By accessing and using Mnema, you accept and agree to be bound by the terms and provisions of this agreement.',
        'terms.useLicense': 'Use License',
        'terms.useLicenseText': 'Permission is granted to temporarily use Mnema for personal, non-commercial educational purposes. This is the grant of a license, not a transfer of title.',
        'terms.userContent': 'User Content',
        'terms.userContentText': 'You retain all rights to the flashcard content you create. By making decks public, you grant other users the right to fork and use your content for their personal learning.',
        'terms.prohibited': 'Prohibited Uses',
        'terms.prohibitedText': 'You may not use Mnema for any illegal purpose or to violate any laws. You may not attempt to gain unauthorized access to any portion of the service.',
        'terms.disclaimer': 'Disclaimer',
        'terms.disclaimerText': 'Mnema is provided "as is" without any representations or warranties. We do not guarantee that the service will be uninterrupted or error-free.',
        'terms.liability': 'Limitation of Liability',
        'terms.liabilityText': 'In no event shall Mnema be liable for any damages arising out of the use or inability to use the service.',
        'terms.changes': 'Changes to Terms',
        'terms.changesText': 'We reserve the right to modify these terms at any time. Continued use of the service after changes constitutes acceptance of the new terms.',
        'terms.contact': 'Contact',
        'terms.contactText': 'For questions about these Terms of Service, please contact us through our GitHub repository.',
        'privacy.title': 'Privacy Policy',
        'privacy.lastUpdated': 'Last updated: December 2025',
        'privacy.infoCollect': 'Information We Collect',
        'privacy.infoCollectText': 'When you use Mnema, we collect information that you provide directly to us, including your email address, username, and the flashcard decks and content you create.',
        'privacy.infoUse': 'How We Use Your Information',
        'privacy.infoUseText': 'We use the information we collect to provide, maintain, and improve our services, including to process your flashcard study sessions and track your learning progress.',
        'privacy.infoSharing': 'Information Sharing',
        'privacy.infoSharingText': 'We do not sell or share your personal information with third parties except as necessary to provide our services or as required by law.',
        'privacy.dataSecurity': 'Data Security',
        'privacy.dataSecurityText': 'We implement appropriate security measures to protect your personal information against unauthorized access, alteration, or destruction.',
        'privacy.yourRights': 'Your Rights',
        'privacy.yourRightsText': 'You have the right to access, update, or delete your personal information at any time through your account settings.',
        'privacy.contact': 'Contact Us',
        'privacy.contactText': 'If you have any questions about this Privacy Policy, please contact us through our GitHub repository.',
        'settings.title': 'Settings',
        'settings.theme': 'Theme',
        'settings.themeDescription': 'Choose your preferred theme',
        'settings.language': 'Language',
        'settings.languageDescription': 'Choose your preferred language',
        'settings.archive': 'Archive',
        'settings.archiveDescription': 'Manage archived decks',
        'settings.dangerZone': 'Danger Zone',
        'settings.dangerZoneDescription': 'Irreversible actions',
        'settings.deleteAccount': 'Delete Account',
        'settings.deleteAccountWarning': 'This will permanently delete your account and all data',
        'settings.restore': 'Restore',
        'theme.light': 'Light',
        'theme.dark': 'Dark',
        'theme.auto': 'Auto',
        'language.english': 'English',
        'language.russian': 'Русский',
        'deckProfile.algorithm': 'Algorithm',
        'deckProfile.autoUpdate': 'Auto-update',
        'deckProfile.version': 'Version',
        'deckProfile.learn': 'Learn',
        'deckProfile.browseCards': 'Browse Cards',
        'deckProfile.addCards': 'Add Cards',
        'deckProfile.sync': 'Sync to Latest',
        'deckProfile.edit': 'Edit',
        'deckProfile.delete': 'Delete',
        'deckProfile.editDeck': 'Edit Deck',
        'deckProfile.yourDeckSettings': 'Your deck settings',
        'deckProfile.publicDeckSettings': 'Public Deck Settings',
        'deckProfile.publicDeckName': 'Public Deck Name',
        'deckProfile.publicDescription': 'Public Description',
        'deckProfile.language': 'Language',
        'deckProfile.tags': 'Tags',
        'deckProfile.tagsPlaceholder': 'Type and press Enter',
        'deckProfile.makePublic': 'Make deck public',
        'deckProfile.listInCatalog': 'List in public catalog',
        'deckProfile.displayName': 'Display Name',
        'deckProfile.description': 'Description',
        'deckProfile.autoUpdateLabel': 'Auto-update when new version is available',
        'deckProfile.cancel': 'Cancel',
        'deckProfile.save': 'Save',
        'deckProfile.saving': 'Saving...',
        'deckProfile.yes': 'Yes',
        'deckProfile.no': 'No',
        'deckProfile.deleteDeck': 'Delete Deck',
        'deckProfile.deleteDeckMessage': 'Are you sure you want to delete this deck? This will archive it and it can be restored later.',
        'deckProfile.confirmDelete': 'Delete',
        'deckProfile.export': 'Export CSV',
        'deckProfile.exporting': 'Exporting...',
        'deckProfile.exportTitle': 'Export deck',
        'deckProfile.exportMessage': 'We will prepare a CSV file and download it to your device.',
        'deckProfile.exportConfirm': 'Export',
        'deckProfile.exportPreparing': 'Export requested. Preparing file...',
        'deckProfile.exportRunning': 'Export in progress. This can take a few seconds.',
        'deckProfile.exportReady': 'Export is ready. Download started.',
        'deckProfile.exportFailed': 'Export failed. Please try again.',
        'deckProfile.required': 'Required',
        'deckProfile.addCardsChoiceTitle': 'Add Cards',
        'deckProfile.addCardsManual': 'Manual',
        'deckProfile.addCardsManualDesc': 'Create cards one by one using the template',
        'deckProfile.addCardsImport': 'Import',
        'deckProfile.addCardsImportDesc': 'Import cards from Anki or CSV with field mapping',
        'addCards.title': 'Add Cards',
        'addCards.addToList': 'Add to List',
        'addCards.cardsToAdd': 'Cards to Add',
        'addCards.loadingTemplate': 'Loading template...',
        'addCards.cancel': 'Cancel',
        'addCards.saveCards': 'Save {{count}} Cards',
        'addCards.saving': 'Saving...',
        'wizard.createNewDeck': 'Create New Deck',
        'wizard.chooseTemplate': 'Choose a Template',
        'wizard.templateSubtitle': 'How would you like to get started?',
        'wizard.browseSubtitle': 'Select a template that matches your learning style',
        'wizard.createNewTemplate': 'Create New Template',
        'wizard.createNewTemplateDesc': 'Build a custom template from scratch',
        'wizard.visualBuilder': 'Visual Template Builder',
        'wizard.visualBuilderDesc': 'Design your template with drag & drop preview',
        'wizard.useExistingTemplate': 'Use Existing Template',
        'wizard.useExistingTemplateDesc': 'Choose from available templates',
        'wizard.importDeck': 'Import Deck',
        'wizard.importDeckDesc': 'Upload APKG/CSV and create a private deck',
        'wizard.myTemplates': 'My Templates',
        'wizard.publicTemplates': 'Public Templates',
        'wizard.noTemplates': 'No templates found in this category.',
        'wizard.loadingTemplates': 'Loading templates...',
        'wizard.back': 'Back',
        'wizard.nextDeckInfo': 'Next: Deck Info',
        'wizard.deckInformation': 'Deck Information',
        'wizard.deckName': 'Deck Name',
        'wizard.deckNamePlaceholder': 'e.g., Spanish Vocabulary',
        'wizard.deckDescription': 'Description',
        'wizard.deckDescriptionPlaceholder': 'Describe what this deck is about',
        'wizard.markdownBold': 'Bold',
        'wizard.markdownItalic': 'Italic',
        'wizard.markdownCode': 'Inline code',
        'wizard.markdownHeading': 'Heading',
        'wizard.markdownList': 'List',
        'validation.maxLength50': 'Maximum 50 characters',
        'validation.maxLength100': 'Maximum 100 characters',
        'validation.maxLength200': 'Maximum 200 characters',
        'validation.tagsLimit': 'Maximum 5 tags',
        'validation.tagTooLong': 'Tag must be 25 characters or less',
        'wizard.deckIcon': 'Deck Icon (optional)',
        'wizard.language': 'Language',
        'wizard.tags': 'Tags',
        'wizard.tagPlaceholder': 'Type and press Enter',
        'wizard.makePublic': 'Make this deck public',
        'wizard.listInCatalog': 'List in public catalog',
        'wizard.nextAddContent': 'Next: Add Content',
        'wizard.creating': 'Creating...',
        'wizard.addCards': 'Add Cards',
        'wizard.addCardsSubtitle': 'Create initial cards for your deck (optional)',
        'wizard.loadingTemplate': 'Loading template...',
        'wizard.addCard': 'Add Card',
        'wizard.pendingCards': 'Pending Cards',
        'wizard.remove': 'Remove',
        'wizard.nextReview': 'Next: Review',
        'wizard.saving': 'Saving...',
        'wizard.reviewDeck': 'Review Your Deck',
        'wizard.reviewSubtitle': 'Review and finalize your new deck',
        'wizard.labelName': 'Name',
        'wizard.labelDescription': 'Description',
        'wizard.labelLanguage': 'Language',
        'wizard.labelVisibility': 'Visibility',
        'wizard.labelTags': 'Tags',
        'wizard.noDescription': 'No description',
        'wizard.visibilityPublic': 'Public',
        'wizard.visibilityPrivate': 'Private',
        'wizard.visibilityListed': 'Listed',
        'wizard.loadingCards': 'Loading cards...',
        'wizard.cards': 'Cards',
        'wizard.moreCards': 'more cards',
        'wizard.noCardsAdded': 'No cards added yet. You can add cards later.',
        'wizard.deckCreated': 'Your deck has been created!',
        'wizard.startLearning': 'Start Learning',
        'wizard.backHome': 'Go to Home',
        'wizard.goToHome': 'Go to Home',
        'wizard.goToDeck': 'Go to Deck',
        'wizard.stepTemplate': 'Template',
        'wizard.stepDeckInfo': 'Deck Info',
        'wizard.stepContent': 'Content',
        'wizard.stepReview': 'Review',
        'wizard.page': 'Page',
        'wizard.of': 'of',
        'wizard.previous': 'Previous',
        'wizard.next': 'Next',
        'wizard.required': 'Required',
        'wizard.emptyCard': 'Empty card',
        'wizard.mediaPlaceholder': '[Media]',
        'import.newTitle': 'Import a deck',
        'import.newSubtitle': 'Upload a file and create a private deck in Mnema',
        'import.mergeTitle': 'Import into this deck',
        'import.mergeSubtitle': 'Map fields and merge cards into your current deck',
        'import.howItWorksTitle': 'What we will import',
        'import.howItWorksFormats': 'Formats: APKG, CSV, TSV, TXT',
        'import.howItWorksFields': 'We map fields by name or let you choose manually',
        'import.howItWorksMedia': 'Images/audio/video are transferred when available',
        'import.howItWorksMerge': 'Extra fields can be skipped if not needed',
        'import.howItWorksPrivate': 'The deck will be private and visible only to you',
        'import.uploadTitle': 'Upload file',
        'import.dropHere': 'Drop the file here',
        'import.or': 'or',
        'import.chooseFile': 'Choose file',
        'import.formatsHint': 'Supported: .apkg, .csv, .tsv, .txt',
        'import.uploading': 'Uploading file...',
        'import.previewing': 'Preparing preview...',
        'import.deckNameLabel': 'Deck name',
        'import.deckNamePlaceholder': 'Imported deck',
        'import.deckDescriptionLabel': 'Description',
        'import.deckDescriptionPlaceholder': 'Describe what this deck is about',
        'import.languageLabel': 'Language',
        'import.tagsLabel': 'Tags',
        'import.tagsPlaceholder': 'Type and press Enter',
        'import.makePublic': 'Make this deck public',
        'import.listInCatalog': 'List in public catalog',
        'import.previewTitle': 'Preview',
        'import.sampleTitle': 'Sample card',
        'import.emptyValue': 'empty',
        'import.mappingTitle': 'Field mapping',
        'import.mappingSubtitle': 'Match each field from your deck to a column in the import file.',
        'import.mappingSkip': 'Skip this field',
        'import.statusTitle': 'Import status',
        'import.statusLabel': 'Status',
        'import.progressLabel': 'Progress',
        'import.completed': 'Import completed. The deck will appear in your list.',
        'import.failed': 'Import failed. Please check the file and try again.',
        'import.statusQueued': 'Queued',
        'import.statusProcessing': 'Processing',
        'import.statusCompleted': 'Completed',
        'import.statusFailed': 'Failed',
        'import.statusCanceled': 'Canceled',
        'import.statusUnknown': 'Unknown',
        'import.close': 'Close',
        'import.goToDecks': 'Go to my decks',
        'import.start': 'Start import',
        'import.starting': 'Starting...',
        'import.startFailed': 'Failed to start import',
        'import.uploadFailed': 'Upload failed. Try another file.',
        'import.previewFailed': 'Preview failed. The file might be invalid.',
        'visualBuilder.title': 'Visual Template Builder',
        'visualBuilder.cancel': 'Cancel',
        'visualBuilder.saveTemplate': 'Save Template',
        'visualBuilder.fieldTypes': 'Field Types',
        'visualBuilder.fieldConfiguration': 'Field Configuration',
        'visualBuilder.selectFieldToConfig': 'Select a field to configure',
        'visualBuilder.cardPreview': 'Card Preview',
        'visualBuilder.front': 'Front',
        'visualBuilder.back': 'Back',
        'visualBuilder.showLabels': 'Show labels',
        'visualBuilder.flipTo': 'Flip to',
        'visualBuilder.dragFieldsHere': 'Drag fields here',
        'visualBuilder.maxFieldsWarning': 'Maximum 10 fields per side reached',
        'visualBuilder.templateName': 'Template Name',
        'visualBuilder.templateNamePlaceholder': 'e.g., Language Vocabulary',
        'visualBuilder.templateDescription': 'Template Description',
        'visualBuilder.templateDescPlaceholder': 'Brief description of this template',
        'visualBuilder.createDialogTitle': 'Create Template',
        'visualBuilder.createDialogMessage': 'Are you sure you want to create this template?',
        'visualBuilder.makePublic': 'Make this template public',
        'visualBuilder.creating': 'Creating...',
        'visualBuilder.createTemplate': 'Create Template',
        'visualBuilder.fieldLabel': 'Label',
        'visualBuilder.fieldHelpText': 'Help Text (optional)',
        'visualBuilder.fieldRequired': 'Required field',
        'visualBuilder.fieldTypeText': 'Text',
        'visualBuilder.fieldTypeLongText': 'Long Text',
        'visualBuilder.fieldTypeMarkdown': 'Markdown',
        'visualBuilder.fieldTypeImage': 'Image',
        'visualBuilder.fieldTypeAudio': 'Audio',
        'visualBuilder.fieldTypeVideo': 'Video',
        'visualBuilder.inDev': 'In Dev',
        'visualBuilder.sampleText': 'Sample text content',
        'visualBuilder.sampleLongText': 'Sample longer text content that might span multiple lines...',
        'visualBuilder.sampleMarkdown': '**Sample** markdown *content*',
        'visualBuilder.sampleImage': '[Image placeholder]',
        'visualBuilder.sampleAudio': '[Audio placeholder]',
        'visualBuilder.sampleVideo': '[Video placeholder]',
        'templateCreator.title': 'Create New Template',
        'templateCreator.name': 'Template Name',
        'templateCreator.namePlaceholder': 'e.g., Language Flashcard',
        'templateCreator.description': 'Description (optional)',
        'templateCreator.descriptionPlaceholder': 'Describe this template',
        'templateCreator.fields': 'Fields',
        'templateCreator.addField': '+ Add Field',
        'templateCreator.label': 'Label',
        'templateCreator.labelPlaceholder': 'e.g., Front Side',
        'templateCreator.type': 'Type',
        'templateCreator.typeText': 'Text',
        'templateCreator.typeLongText': 'Long Text',
        'templateCreator.typeMarkdown': 'Markdown',
        'templateCreator.typeImage': 'Image',
        'templateCreator.typeAudio': 'Audio',
        'templateCreator.typeVideo': 'Video',
        'templateCreator.showOnFront': 'Show on front',
        'templateCreator.required': 'Required',
        'templateCreator.helpText': 'Help Text (optional)',
        'templateCreator.helpTextPlaceholder': 'Hint for users',
        'templateCreator.remove': 'Remove',
        'templateCreator.makePublic': 'Make this template public',
        'templateCreator.cancel': 'Cancel',
        'templateCreator.create': 'Create Template',
        'templateCreator.creating': 'Creating...',
        'templateCreator.minFieldsError': 'A template must have at least 2 fields.',
        'templateCreator.bothSidesError': 'A template must have at least one field on each side of the card.',
        'templateCreator.requiredBothSidesError': 'Each side must have at least one required field.',
        'review.sessionComplete': 'Session Complete',
        'review.allCardsReviewed': 'All cards have been reviewed!',
        'review.backToDeck': 'Back to Deck',
        'review.new': 'New',
        'review.due': 'Due',
        'review.again': 'Again',
        'review.hard': 'Hard',
        'review.good': 'Good',
        'review.easy': 'Easy',
        'review.keyboardShortcuts': 'Keyboard: 1=Again, 2=Hard, 3=Good, 4=Easy',
        'review.showAnswer': 'Show Answer',
        'review.spaceToReveal': 'Press Space to reveal answer',
        'deckProfile.schedulerAlgorithm': 'Scheduler Algorithm',
        'deckProfile.pendingMigrationText': 'reviews will be recalculated as you study',
        'deckProfile.reviewPreferences': 'Review Preferences',
        'deckProfile.dailyNewLimit': 'Daily new cards limit',
        'deckProfile.dailyNewLimitHelp': 'Maximum new cards per day (enforced server-side)',
        'deckProfile.learningHorizonHours': 'Learning horizon (hours)',
        'deckProfile.learningHorizonHelp': 'Time window for reviewing cards; cards may repeat within a session',
        'settings.cardAppearance': 'Card Appearance',
        'settings.cardAppearanceDescription': 'Customize how cards are displayed',
        'settings.hideFieldLabels': 'Hide field labels on cards',
        'settings.showFrontSideAfterFlip': 'Show front side after revealing answer',
        'login.title': 'Welcome to Mnema',
        'login.subtitle': 'Sign in to continue your learning',
        'login.localAuthTitle': 'Email Authentication',
        'login.plannedDevelopment': 'Planned for development',
        'login.email': 'Email',
        'login.username': 'Username',
        'login.password': 'Password',
        'login.oauthTitle': 'OAuth 2.0',
        'login.signInWithGoogle': 'Sign in with Google',
        'login.github': 'GitHub',
        'login.yandex': 'Yandex',
        'login.microsoft': 'Microsoft',
        'login.consentText': 'By continuing, you agree to the processing of your personal data in accordance with our Privacy Policy',
        'login.alreadyAuthenticated': 'You are already signed in',
        'login.goToProfile': 'Go to Profile',
        'profile.title': 'Profile',
        'profile.loadingProfile': 'Loading profile...',
        'profile.editProfile': 'Edit Profile',
        'profile.username': 'Username',
        'profile.bio': 'Bio',
        'profile.avatarUrl': 'Avatar URL',
        'profile.enterUsername': 'Enter username',
        'profile.enterBio': 'Tell us about yourself',
        'profile.avatarPlaceholder': 'https://example.com/avatar.jpg',
        'profile.saveChanges': 'Save Changes',
        'profile.saving': 'Saving...',
        'profile.memberSince': 'Member since',
        'profile.admin': 'Admin',
        'profile.pleaseLogIn': 'Please log in to view your profile.',
        'profile.logIn': 'Log In',
        'profile.usernameMinError': 'Username must be at least 3 characters',
        'myStudy.title': 'My Study',
        'myStudy.myDecks': 'My Decks',
        'myStudy.viewAllDecks': 'All decks',
        'myStudy.myTemplates': 'My Templates',
        'myStudy.viewAllTemplates': 'All templates',
        'decks.title': 'My Decks',
        'decks.createDeck': 'Create Deck',
        'decks.noDecks': 'No Decks Yet',
        'decks.noDecksDescription': 'Create your first deck to start learning',
        'decks.loadMore': 'Load More',
        'decks.loading': 'Loading...',
        'templates.title': 'My Templates',
        'templates.view': 'View',
        'templates.select': 'Select',
        'templates.selected': 'Selected',
        'templates.public': 'Public',
        'templates.private': 'Private',
        'templates.fields': 'fields',
        'templates.loadMore': 'Load More',
        'templates.loading': 'Loading...',
        'templates.noTemplates': 'No Templates Yet',
        'templates.noTemplatesDescription': 'Create a template to start building decks',
        'publicTemplates.title': 'Templates',
        'publicTemplates.subtitle': 'Browse community templates and your own',
        'publicTemplates.filterAll': 'All',
        'publicTemplates.filterMine': 'Mine',
        'publicTemplates.filterPublic': 'Public',
        'publicTemplates.select': 'Use Template',
        'templateProfile.edit': 'Edit Template',
        'templateProfile.save': 'Save',
        'templateProfile.saving': 'Saving...',
        'templateProfile.cancel': 'Cancel',
        'templateProfile.useTemplate': 'Use Template',
        'templateProfile.visibility': 'Visibility',
        'templateProfile.public': 'Public',
        'templateProfile.private': 'Private',
        'templateProfile.createdAt': 'Created',
        'templateProfile.previewTitle': 'Preview Card',
        'templateProfile.flipHint': 'Click to flip',
        'templateProfile.fields': 'Fields',
        'templateProfile.front': 'Front',
        'templateProfile.back': 'Back',
        'templateProfile.fieldLabel': 'Label',
        'templateProfile.fieldHelpText': 'Help text',
        'templateProfile.fieldName': 'Field key',
        'templateProfile.fieldType': 'Type',
        'templateProfile.fieldSide': 'Side',
        'templateProfile.addField': 'Add Optional Field',
        'templateProfile.addFieldButton': 'Add Field',
        'templateProfile.fieldNamePlaceholder': 'e.g., example',
        'templateProfile.fieldLabelPlaceholder': 'e.g., Example',
        'templateProfile.fieldHelpTextPlaceholder': 'Hint for learners',
        'templateProfile.namePlaceholder': 'Template name',
        'templateProfile.descriptionPlaceholder': 'Describe this template',
        'templateProfile.noDescription': 'No description',
        'templateProfile.safeChanges': 'Safe edits: name, description, visibility, labels, placement, and new optional fields.',
        'templateProfile.noFrontFields': 'No front fields',
        'templateProfile.noBackFields': 'No back fields',
        'templateProfile.moveUp': 'Move up',
        'templateProfile.moveDown': 'Move down',
        'templateProfile.moveToBack': 'Move to back',
        'templateProfile.moveToFront': 'Move to front',
        'templateProfile.fieldRequiredError': 'Field name and label are required.',
        'templateProfile.fieldDuplicateError': 'Field key already exists.',
        'templateProfile.nameRequiredError': 'Template name is required.',
        'templateProfile.typeText': 'Text',
        'templateProfile.typeLongText': 'Long Text',
        'templateProfile.typeMarkdown': 'Markdown',
        'templateProfile.typeImage': 'Image',
        'templateProfile.typeAudio': 'Audio',
        'templateProfile.typeVideo': 'Video',
        'settings.mode': 'Mode',
        'settings.accent': 'Accent',
        'settings.confirmDeleteTitle': 'Delete Account',
        'settings.confirmDeleteMessage': 'Are you sure you want to delete your account? This action cannot be undone.',
        'settings.confirmDeleteButton': 'Delete Account',
        'settings.cancelButton': 'Cancel',
        'visualBuilder.frontSide': 'Front Side',
        'visualBuilder.backSide': 'Back Side',
        'visualBuilder.frontSideRu': 'Передняя сторона карты',
        'visualBuilder.backSideRu': 'Задняя сторона карты',
        'visualBuilder.moveUp': 'Move up',
        'visualBuilder.moveDown': 'Move down',
        'visualBuilder.removeField': 'Remove field',
    },
    ru: {
        'app.name': 'Mnema',
        'nav.myStudy': 'Моё обучение',
        'nav.createDeck': 'Создать колоду',
        'nav.login': 'Войти',
        'nav.logout': 'Выйти',
        'nav.profile': 'Профиль',
        'nav.settings': 'Настройки',
        'home.studyToday': 'Ваше обучение сегодня',
        'home.yourDecks': 'Ваши колоды',
        'home.topPublicDecks': 'Топ публичных колод',
        'home.viewAll': 'Показать все',
        'home.continueLearn': 'Продолжить обучение',
        'home.cardsDue': 'карт к повторению',
        'home.new': 'новых',
        'home.noDecksYet': 'Пока нет колод',
        'home.noDecksDescription': 'Создайте свою первую колоду или форкните публичную колоду, чтобы начать',
        'home.browsePublicDecks': 'Просмотреть публичные колоды',
        'home.noPublicDecks': 'Нет доступных публичных колод',
        'home.noPublicDecksDescription': 'Публичные колоды появятся здесь после публикации',
        'button.learn': 'Учить',
        'button.browse': 'Просмотр',
        'button.fork': 'Форкнуть колоду',
        'button.update': 'Обновить',
        'button.createDeck': 'Создать колоду',
        'publicDecks.title': 'Публичные колоды',
        'publicDecks.subtitle': 'Открывайте и форкайте колоды карточек, созданные сообществом',
        'publicDecks.searchPlaceholder': 'Поиск публичных колод...',
        'publicDecks.noArchivedDecks': 'Нет архивированных колод',
        'cardBrowser.title': 'Просмотр карточек',
        'cardBrowser.cards': 'карт',
        'cardBrowser.list': 'Список',
        'cardBrowser.cardsView': 'Карточки',
        'cardBrowser.frontPreview': 'Предпросмотр лицевой стороны',
        'cardBrowser.tags': 'Теги',
        'cardBrowser.previous': '← Предыдущая',
        'cardBrowser.next': 'Следующая →',
        'cardBrowser.clickToFlip': 'Нажмите на карточку, чтобы перевернуть',
        'cardBrowser.keyboardHint': 'Пробел переворачивает карточку, стрелки влево/вправо для навигации',
        'publicCardBrowser.publicDeck': 'Публичная колода',
        'publicCardBrowser.cards': 'карт',
        'publicCardBrowser.frontPreview': 'Предпросмотр лицевой стороны',
        'publicCardBrowser.noCards': 'В этой колоде нет карточек',
        'publicCardBrowser.noCardsDescription': 'В этой публичной колоде пока нет карточек',
        'cardBrowser.reviews': 'Повторений',
        'cardBrowser.nextReview': 'Следующее повторение',
        'cardBrowser.status': 'Статус',
        'cardBrowser.actions': 'Действия',
        'cardBrowser.active': 'Активна',
        'cardBrowser.suspended': 'Приостановлена',
        'cardBrowser.editCard': 'Редактировать карточку',
        'cardBrowser.deleteCard': 'Удалить карточку',
        'cardBrowser.deleteCardTitle': 'Удалить карточку?',
        'cardBrowser.deleteCardMessage': 'Карточка исчезнет из вашей колоды.',
        'cardBrowser.confirmDelete': 'Удалить',
        'cardBrowser.deleteScopeTitle': 'Удалить карточку',
        'cardBrowser.deleteScopeMessage': 'Удалить карточку для всех в новых версиях или только из вашей колоды?',
        'cardBrowser.deleteLocal': 'Только для меня',
        'cardBrowser.deleteGlobal': 'Для всех (новые версии)',
        'cardBrowser.backToDeck': '← Назад к колоде',
        'cardBrowser.personalNote': 'Личная заметка',
        'cardBrowser.suspendCard': 'Приостановить эту карточку (временно скрыть из повторений)',
        'cardBrowser.cancel': 'Отмена',
        'cardBrowser.save': 'Сохранить',
        'cardBrowser.saving': 'Сохранение...',
        'nav.privacy': 'Конфиденциальность',
        'nav.terms': 'Условия',
        'footer.github': 'GitHub',
        'footer.docs': 'Документация',
        'memoryTips.tip1': 'Активное воспоминание укрепляет нейронные связи лучше, чем пассивный повтор.',
        'memoryTips.tip2': 'Интервальное повторение использует эффект интервала для оптимального запоминания.',
        'memoryTips.tip3': 'Постоянство — это мост между целями и их достижением.',
        'memoryTips.tip4': 'Древние ораторы запоминали часы речей с помощью структурированной техники.',
        'memoryTips.tip5': 'Ежедневная практика, даже 5 минут, дает результаты со временем.',
        'memoryTips.tip6': 'Память — это хранилище и хранитель всех вещей.',
        'terms.title': 'Условия использования',
        'terms.lastUpdated': 'Последнее обновление: декабрь 2025',
        'terms.acceptance': 'Принятие условий',
        'terms.acceptanceText': 'Получая доступ и используя Mnema, вы принимаете и соглашаетесь соблюдать условия и положения настоящего соглашения.',
        'terms.useLicense': 'Лицензия на использование',
        'terms.useLicenseText': 'Разрешается временно использовать Mnema в личных некоммерческих образовательных целях. Это предоставление лицензии, а не передача права собственности.',
        'terms.userContent': 'Пользовательский контент',
        'terms.userContentText': 'Вы сохраняете все права на созданный вами контент карточек. Делая колоды публичными, вы предоставляете другим пользователям право форкать и использовать ваш контент для личного обучения.',
        'terms.prohibited': 'Запрещенное использование',
        'terms.prohibitedText': 'Вы не можете использовать Mnema в незаконных целях или для нарушения каких-либо законов. Вы не можете пытаться получить несанкционированный доступ к какой-либо части сервиса.',
        'terms.disclaimer': 'Отказ от ответственности',
        'terms.disclaimerText': 'Mnema предоставляется "как есть" без каких-либо заявлений или гарантий. Мы не гарантируем, что сервис будет бесперебойным или безошибочным.',
        'terms.liability': 'Ограничение ответственности',
        'terms.liabilityText': 'Ни при каких обстоятельствах Mnema не несет ответственности за какие-либо убытки, возникающие в результате использования или невозможности использования сервиса.',
        'terms.changes': 'Изменения условий',
        'terms.changesText': 'Мы оставляем за собой право изменять эти условия в любое время. Продолжение использования сервиса после изменений означает принятие новых условий.',
        'terms.contact': 'Контакты',
        'terms.contactText': 'По вопросам об этих Условиях использования, пожалуйста, свяжитесь с нами через наш репозиторий на GitHub.',
        'privacy.title': 'Политика конфиденциальности',
        'privacy.lastUpdated': 'Последнее обновление: декабрь 2025',
        'privacy.infoCollect': 'Собираемая информация',
        'privacy.infoCollectText': 'Когда вы используете Mnema, мы собираем информацию, которую вы предоставляете нам напрямую, включая ваш адрес электронной почты, имя пользователя и созданные вами колоды и контент карточек.',
        'privacy.infoUse': 'Как мы используем вашу информацию',
        'privacy.infoUseText': 'Мы используем собранную информацию для предоставления, поддержки и улучшения наших услуг, включая обработку ваших учебных сессий с карточками и отслеживание прогресса обучения.',
        'privacy.infoSharing': 'Обмен информацией',
        'privacy.infoSharingText': 'Мы не продаем и не передаем вашу личную информацию третьим лицам, за исключением случаев, необходимых для предоставления наших услуг или требуемых законом.',
        'privacy.dataSecurity': 'Безопасность данных',
        'privacy.dataSecurityText': 'Мы применяем соответствующие меры безопасности для защиты вашей личной информации от несанкционированного доступа, изменения или уничтожения.',
        'privacy.yourRights': 'Ваши права',
        'privacy.yourRightsText': 'Вы имеете право в любое время получать доступ, обновлять или удалять вашу личную информацию через настройки аккаунта.',
        'privacy.contact': 'Связаться с нами',
        'privacy.contactText': 'Если у вас есть вопросы об этой Политике конфиденциальности, пожалуйста, свяжитесь с нами через наш репозиторий на GitHub.',
        'settings.title': 'Настройки',
        'settings.theme': 'Тема',
        'settings.themeDescription': 'Выберите предпочитаемую тему',
        'settings.language': 'Язык',
        'settings.languageDescription': 'Выберите предпочитаемый язык',
        'settings.archive': 'Архив',
        'settings.archiveDescription': 'Управление архивированными колодами',
        'settings.dangerZone': 'Опасная зона',
        'settings.dangerZoneDescription': 'Необратимые действия',
        'settings.deleteAccount': 'Удалить аккаунт',
        'settings.deleteAccountWarning': 'Это навсегда удалит ваш аккаунт и все данные',
        'settings.restore': 'Восстановить',
        'theme.light': 'Светлая',
        'theme.dark': 'Тёмная',
        'theme.auto': 'Авто',
        'language.english': 'English',
        'language.russian': 'Русский',
        'deckProfile.algorithm': 'Алгоритм',
        'deckProfile.autoUpdate': 'Авто-обновление',
        'deckProfile.version': 'Версия',
        'deckProfile.learn': 'Учить',
        'deckProfile.browseCards': 'Просмотр карточек',
        'deckProfile.addCards': 'Добавить карточки',
        'deckProfile.sync': 'Синхронизировать до последней версии',
        'deckProfile.edit': 'Редактировать',
        'deckProfile.delete': 'Удалить',
        'deckProfile.editDeck': 'Редактировать колоду',
        'deckProfile.yourDeckSettings': 'Настройки вашей колоды',
        'deckProfile.publicDeckSettings': 'Настройки публичной колоды',
        'deckProfile.publicDeckName': 'Имя публичной колоды',
        'deckProfile.publicDescription': 'Публичное описание',
        'deckProfile.language': 'Язык',
        'deckProfile.tags': 'Теги',
        'deckProfile.tagsPlaceholder': 'Введите и нажмите Enter',
        'deckProfile.makePublic': 'Сделать колоду публичной',
        'deckProfile.listInCatalog': 'Показывать в публичном каталоге',
        'deckProfile.displayName': 'Отображаемое имя',
        'deckProfile.description': 'Описание',
        'deckProfile.autoUpdateLabel': 'Авто-обновление при выходе новой версии',
        'deckProfile.cancel': 'Отмена',
        'deckProfile.save': 'Сохранить',
        'deckProfile.saving': 'Сохранение...',
        'deckProfile.yes': 'Да',
        'deckProfile.no': 'Нет',
        'deckProfile.deleteDeck': 'Удалить колоду',
        'deckProfile.deleteDeckMessage': 'Вы уверены, что хотите удалить эту колоду? Она будет архивирована и её можно будет восстановить позже.',
        'deckProfile.confirmDelete': 'Удалить',
        'deckProfile.export': 'Экспорт CSV',
        'deckProfile.exporting': 'Экспорт...',
        'deckProfile.exportTitle': 'Экспорт колоды',
        'deckProfile.exportMessage': 'Мы подготовим CSV-файл и скачаем его на устройство.',
        'deckProfile.exportConfirm': 'Экспортировать',
        'deckProfile.exportPreparing': 'Экспорт запрошен. Подготавливаем файл...',
        'deckProfile.exportRunning': 'Идет экспорт. Это может занять несколько секунд.',
        'deckProfile.exportReady': 'Экспорт готов. Загрузка началась.',
        'deckProfile.exportFailed': 'Экспорт не удался. Попробуйте еще раз.',
        'deckProfile.required': 'Обязательно',
        'deckProfile.addCardsChoiceTitle': 'Добавить карточки',
        'deckProfile.addCardsManual': 'Ручное добавление',
        'deckProfile.addCardsManualDesc': 'Создайте карточки вручную по шаблону',
        'deckProfile.addCardsImport': 'Импорт',
        'deckProfile.addCardsImportDesc': 'Импорт из Anki или CSV с сопоставлением полей',
        'addCards.title': 'Добавить карточки',
        'addCards.addToList': 'Добавить в список',
        'addCards.cardsToAdd': 'Карточки для добавления',
        'addCards.loadingTemplate': 'Загрузка шаблона...',
        'addCards.cancel': 'Отмена',
        'addCards.saveCards': 'Сохранить {{count}} карт',
        'addCards.saving': 'Сохранение...',
        'wizard.createNewDeck': 'Создать новую колоду',
        'wizard.chooseTemplate': 'Выберите шаблон',
        'wizard.templateSubtitle': 'Как вы хотите начать?',
        'wizard.browseSubtitle': 'Выберите шаблон, который соответствует вашему стилю обучения',
        'wizard.createNewTemplate': 'Создать новый шаблон',
        'wizard.createNewTemplateDesc': 'Создайте пользовательский шаблон с нуля',
        'wizard.visualBuilder': 'Визуальный конструктор',
        'wizard.visualBuilderDesc': 'Соберите шаблон с предпросмотром и drag & drop',
        'wizard.useExistingTemplate': 'Использовать существующий шаблон',
        'wizard.useExistingTemplateDesc': 'Выберите из доступных шаблонов',
        'wizard.importDeck': 'Импорт колоды',
        'wizard.importDeckDesc': 'Загрузите APKG/CSV и создайте приватную колоду',
        'wizard.myTemplates': 'Мои шаблоны',
        'wizard.publicTemplates': 'Публичные шаблоны',
        'wizard.noTemplates': 'Шаблоны не найдены в этой категории.',
        'wizard.loadingTemplates': 'Загрузка шаблонов...',
        'wizard.back': 'Назад',
        'wizard.nextDeckInfo': 'Далее: Информация о колоде',
        'wizard.deckInformation': 'Информация о колоде',
        'wizard.deckName': 'Имя колоды',
        'wizard.deckNamePlaceholder': 'например, Испанская лексика',
        'wizard.deckDescription': 'Описание',
        'wizard.deckDescriptionPlaceholder': 'Опишите, о чём эта колода',
        'wizard.markdownBold': 'Жирный',
        'wizard.markdownItalic': 'Курсив',
        'wizard.markdownCode': 'Код',
        'wizard.markdownHeading': 'Заголовок',
        'wizard.markdownList': 'Список',
        'validation.maxLength50': 'Максимум 50 символов',
        'validation.maxLength100': 'Максимум 100 символов',
        'validation.maxLength200': 'Максимум 200 символов',
        'validation.tagsLimit': 'Максимум 5 тегов',
        'validation.tagTooLong': 'Тег должен быть не длиннее 25 символов',
        'wizard.deckIcon': 'Иконка колоды (необязательно)',
        'wizard.language': 'Язык',
        'wizard.tags': 'Теги',
        'wizard.tagPlaceholder': 'Введите и нажмите Enter',
        'wizard.makePublic': 'Сделать эту колоду публичной',
        'wizard.listInCatalog': 'Показывать в публичном каталоге',
        'wizard.nextAddContent': 'Далее: Добавить содержимое',
        'wizard.creating': 'Создание...',
        'wizard.addCards': 'Добавить карточки',
        'wizard.addCardsSubtitle': 'Создайте начальные карточки для вашей колоды (необязательно)',
        'wizard.loadingTemplate': 'Загрузка шаблона...',
        'wizard.addCard': 'Добавить карточку',
        'wizard.pendingCards': 'Карточки в ожидании',
        'wizard.remove': 'Удалить',
        'wizard.nextReview': 'Далее: Просмотр',
        'wizard.saving': 'Сохранение...',
        'wizard.reviewDeck': 'Проверьте вашу колоду',
        'wizard.reviewSubtitle': 'Просмотрите и завершите создание колоды',
        'wizard.labelName': 'Имя',
        'wizard.labelDescription': 'Описание',
        'wizard.labelLanguage': 'Язык',
        'wizard.labelVisibility': 'Видимость',
        'wizard.labelTags': 'Теги',
        'wizard.noDescription': 'Без описания',
        'wizard.visibilityPublic': 'Публичная',
        'wizard.visibilityPrivate': 'Приватная',
        'wizard.visibilityListed': 'В каталоге',
        'wizard.loadingCards': 'Загрузка карточек...',
        'wizard.cards': 'Карточки',
        'wizard.moreCards': 'ещё карточек',
        'wizard.noCardsAdded': 'Карточки ещё не добавлены. Их можно добавить позже.',
        'wizard.deckCreated': 'Ваша колода создана!',
        'wizard.startLearning': 'Начать обучение',
        'wizard.backHome': 'На главную',
        'wizard.goToHome': 'На главную',
        'wizard.goToDeck': 'Открыть колоду',
        'wizard.stepTemplate': 'Шаблон',
        'wizard.stepDeckInfo': 'Информация',
        'wizard.stepContent': 'Содержимое',
        'wizard.stepReview': 'Просмотр',
        'wizard.page': 'Страница',
        'wizard.of': 'из',
        'wizard.previous': 'Предыдущая',
        'wizard.next': 'Следующая',
        'wizard.required': 'Обязательно',
        'wizard.emptyCard': 'Пустая карточка',
        'wizard.mediaPlaceholder': '[Медиа]',
        'import.newTitle': 'Импорт колоды',
        'import.newSubtitle': 'Загрузите файл и создайте приватную колоду в Mnema',
        'import.mergeTitle': 'Импорт в эту колоду',
        'import.mergeSubtitle': 'Сопоставьте поля и добавьте карты в текущую колоду',
        'import.howItWorksTitle': 'Что мы перенесем',
        'import.howItWorksFormats': 'Форматы: APKG, CSV, TSV, TXT',
        'import.howItWorksFields': 'Поля сопоставим автоматически или вручную',
        'import.howItWorksMedia': 'Изображения, аудио и видео переносятся при наличии',
        'import.howItWorksMerge': 'Лишние поля можно пропустить',
        'import.howItWorksPrivate': 'Колода будет приватной и доступной только вам',
        'import.uploadTitle': 'Загрузка файла',
        'import.dropHere': 'Перетащите файл сюда',
        'import.or': 'или',
        'import.chooseFile': 'Выбрать файл',
        'import.formatsHint': 'Поддерживаемые форматы: .apkg, .csv, .tsv, .txt',
        'import.uploading': 'Загрузка файла...',
        'import.previewing': 'Готовим превью...',
        'import.deckNameLabel': 'Название колоды',
        'import.deckNamePlaceholder': 'Импортированная колода',
        'import.deckDescriptionLabel': 'Описание',
        'import.deckDescriptionPlaceholder': 'Опишите, о чём эта колода',
        'import.languageLabel': 'Язык',
        'import.tagsLabel': 'Теги',
        'import.tagsPlaceholder': 'Введите и нажмите Enter',
        'import.makePublic': 'Сделать колоду публичной',
        'import.listInCatalog': 'Показывать в каталоге',
        'import.previewTitle': 'Предпросмотр',
        'import.sampleTitle': 'Пример карточки',
        'import.emptyValue': 'пусто',
        'import.mappingTitle': 'Сопоставление полей',
        'import.mappingSubtitle': 'Укажите, какое поле из файла соответствует полю вашей колоды.',
        'import.mappingSkip': 'Не импортировать поле',
        'import.statusTitle': 'Статус импорта',
        'import.statusLabel': 'Статус',
        'import.progressLabel': 'Прогресс',
        'import.completed': 'Импорт завершен. Колода появится в списке.',
        'import.failed': 'Импорт не удался. Проверьте файл и попробуйте снова.',
        'import.statusQueued': 'В очереди',
        'import.statusProcessing': 'В обработке',
        'import.statusCompleted': 'Завершено',
        'import.statusFailed': 'Ошибка',
        'import.statusCanceled': 'Отменено',
        'import.statusUnknown': 'Неизвестно',
        'import.close': 'Закрыть',
        'import.goToDecks': 'Мои колоды',
        'import.start': 'Запустить импорт',
        'import.starting': 'Запускаем...',
        'import.startFailed': 'Не удалось запустить импорт',
        'import.uploadFailed': 'Не удалось загрузить файл',
        'import.previewFailed': 'Не удалось построить превью',
        'visualBuilder.title': 'Визуальный конструктор шаблонов',
        'visualBuilder.cancel': 'Отмена',
        'visualBuilder.saveTemplate': 'Сохранить шаблон',
        'visualBuilder.fieldTypes': 'Типы полей',
        'visualBuilder.fieldConfiguration': 'Настройка поля',
        'visualBuilder.selectFieldToConfig': 'Выберите поле для настройки',
        'visualBuilder.cardPreview': 'Превью карточки',
        'visualBuilder.front': 'Лицевая',
        'visualBuilder.back': 'Обратная',
        'visualBuilder.showLabels': 'Показывать метки',
        'visualBuilder.flipTo': 'Перевернуть на',
        'visualBuilder.dragFieldsHere': 'Перетащите поля сюда',
        'visualBuilder.maxFieldsWarning': 'Достигнут максимум 10 полей на стороне',
        'visualBuilder.templateName': 'Название шаблона',
        'visualBuilder.templateNamePlaceholder': 'например, Словарный запас',
        'visualBuilder.templateDescription': 'Описание шаблона',
        'visualBuilder.templateDescPlaceholder': 'Краткое описание этого шаблона',
        'visualBuilder.createDialogTitle': 'Создать шаблон',
        'visualBuilder.createDialogMessage': 'Вы уверены, что хотите создать этот шаблон?',
        'visualBuilder.makePublic': 'Сделать этот шаблон публичным',
        'visualBuilder.creating': 'Создание...',
        'visualBuilder.createTemplate': 'Создать шаблон',
        'visualBuilder.fieldLabel': 'Метка',
        'visualBuilder.fieldHelpText': 'Подсказка (необязательно)',
        'visualBuilder.fieldRequired': 'Обязательное поле',
        'visualBuilder.fieldTypeText': 'Текст',
        'visualBuilder.fieldTypeLongText': 'Длинный текст',
        'visualBuilder.fieldTypeMarkdown': 'Markdown',
        'visualBuilder.fieldTypeImage': 'Изображение',
        'visualBuilder.fieldTypeAudio': 'Аудио',
        'visualBuilder.fieldTypeVideo': 'Видео',
        'visualBuilder.inDev': 'В разработке',
        'visualBuilder.sampleText': 'Пример текстового содержимого',
        'visualBuilder.sampleLongText': 'Пример длинного текста, который может занимать несколько строк...',
        'visualBuilder.sampleMarkdown': '**Пример** markdown *текста*',
        'visualBuilder.sampleImage': '[Заглушка изображения]',
        'visualBuilder.sampleAudio': '[Заглушка аудио]',
        'visualBuilder.sampleVideo': '[Заглушка видео]',
        'templateCreator.title': 'Создать новый шаблон',
        'templateCreator.name': 'Имя шаблона',
        'templateCreator.namePlaceholder': 'напр., Языковая карточка',
        'templateCreator.description': 'Описание (необязательно)',
        'templateCreator.descriptionPlaceholder': 'Опишите этот шаблон',
        'templateCreator.fields': 'Поля',
        'templateCreator.addField': '+ Добавить поле',
        'templateCreator.label': 'Метка',
        'templateCreator.labelPlaceholder': 'напр., Лицевая сторона',
        'templateCreator.type': 'Тип',
        'templateCreator.typeText': 'Текст',
        'templateCreator.typeLongText': 'Длинный текст',
        'templateCreator.typeMarkdown': 'Markdown',
        'templateCreator.typeImage': 'Изображение',
        'templateCreator.typeAudio': 'Аудио',
        'templateCreator.typeVideo': 'Видео',
        'templateCreator.showOnFront': 'Показать спереди',
        'templateCreator.required': 'Обязательно',
        'templateCreator.helpText': 'Текст подсказки (необязательно)',
        'templateCreator.helpTextPlaceholder': 'Подсказка для пользователей',
        'templateCreator.remove': 'Удалить',
        'templateCreator.makePublic': 'Сделать этот шаблон публичным',
        'templateCreator.cancel': 'Отмена',
        'templateCreator.create': 'Создать шаблон',
        'templateCreator.creating': 'Создание...',
        'templateCreator.minFieldsError': 'Шаблон должен иметь не менее 2 полей.',
        'templateCreator.bothSidesError': 'Шаблон должен иметь хотя бы одно поле на каждой стороне карточки.',
        'templateCreator.requiredBothSidesError': 'На каждой стороне должно быть хотя бы одно обязательное поле.',
        'review.sessionComplete': 'Сессия завершена',
        'review.allCardsReviewed': 'Все карточки просмотрены!',
        'review.backToDeck': 'Назад к колоде',
        'review.new': 'Новых',
        'review.due': 'К повторению',
        'review.again': 'Снова',
        'review.hard': 'Сложно',
        'review.good': 'Хорошо',
        'review.easy': 'Легко',
        'review.keyboardShortcuts': 'Клавиши: 1=Снова, 2=Сложно, 3=Хорошо, 4=Легко',
        'review.showAnswer': 'Показать ответ',
        'review.spaceToReveal': 'Нажмите пробел, чтобы показать ответ',
        'deckProfile.schedulerAlgorithm': 'Алгоритм планирования',
        'deckProfile.pendingMigrationText': 'повторений будет пересчитано во время обучения',
        'deckProfile.reviewPreferences': 'Настройки повторения',
        'deckProfile.dailyNewLimit': 'Лимит новых карточек в день',
        'deckProfile.dailyNewLimitHelp': 'Максимум новых карточек в день (контролируется сервером)',
        'deckProfile.learningHorizonHours': 'Горизонт обучения (часы)',
        'deckProfile.learningHorizonHelp': 'Временное окно для повторения карточек; карточки могут повторяться в течение сессии',
        'settings.cardAppearance': 'Внешний вид карточек',
        'settings.cardAppearanceDescription': 'Настройте отображение карточек',
        'settings.hideFieldLabels': 'Скрыть метки полей на карточках',
        'settings.showFrontSideAfterFlip': 'Показывать переднюю сторону после раскрытия ответа',
        'login.title': 'Добро пожаловать в Mnema',
        'login.subtitle': 'Войдите, чтобы продолжить обучение',
        'login.localAuthTitle': 'Аутентификация по email',
        'login.plannedDevelopment': 'В разработке',
        'login.email': 'Email',
        'login.username': 'Имя пользователя',
        'login.password': 'Пароль',
        'login.oauthTitle': 'OAuth 2.0',
        'login.signInWithGoogle': 'Войти через Google',
        'login.github': 'GitHub',
        'login.yandex': 'Яндекс',
        'login.microsoft': 'Microsoft',
        'login.consentText': 'Продолжая, вы соглашаетесь на обработку ваших персональных данных в соответствии с нашей Политикой конфиденциальности',
        'login.alreadyAuthenticated': 'Вы уже вошли',
        'login.goToProfile': 'Перейти в профиль',
        'profile.title': 'Профиль',
        'profile.loadingProfile': 'Загрузка профиля...',
        'profile.editProfile': 'Редактировать профиль',
        'profile.username': 'Имя пользователя',
        'profile.bio': 'О себе',
        'profile.avatarUrl': 'URL аватара',
        'profile.enterUsername': 'Введите имя пользователя',
        'profile.enterBio': 'Расскажите о себе',
        'profile.avatarPlaceholder': 'https://example.com/avatar.jpg',
        'profile.saveChanges': 'Сохранить изменения',
        'profile.saving': 'Сохранение...',
        'profile.memberSince': 'С нами с',
        'profile.admin': 'Администратор',
        'profile.pleaseLogIn': 'Войдите, чтобы просмотреть свой профиль.',
        'profile.logIn': 'Войти',
        'profile.usernameMinError': 'Имя пользователя должно содержать не менее 3 символов',
        'myStudy.title': 'Моё обучение',
        'myStudy.myDecks': 'Мои колоды',
        'myStudy.viewAllDecks': 'Все колоды',
        'myStudy.myTemplates': 'Мои шаблоны',
        'myStudy.viewAllTemplates': 'Все шаблоны',
        'decks.title': 'Мои колоды',
        'decks.createDeck': 'Создать колоду',
        'decks.noDecks': 'Пока нет колод',
        'decks.noDecksDescription': 'Создайте свою первую колоду, чтобы начать обучение',
        'decks.loadMore': 'Загрузить ещё',
        'decks.loading': 'Загрузка...',
        'templates.title': 'Мои шаблоны',
        'templates.view': 'Открыть',
        'templates.select': 'Выбрать',
        'templates.selected': 'Выбрано',
        'templates.public': 'Публичный',
        'templates.private': 'Приватный',
        'templates.fields': 'полей',
        'templates.loadMore': 'Показать еще',
        'templates.loading': 'Загрузка...',
        'templates.noTemplates': 'Шаблонов пока нет',
        'templates.noTemplatesDescription': 'Создайте шаблон для новых колод',
        'publicTemplates.title': 'Шаблоны',
        'publicTemplates.subtitle': 'Откройте шаблоны сообщества и свои',
        'publicTemplates.filterAll': 'Все',
        'publicTemplates.filterMine': 'Мои',
        'publicTemplates.filterPublic': 'Публичные',
        'publicTemplates.select': 'Использовать',
        'templateProfile.edit': 'Редактировать шаблон',
        'templateProfile.save': 'Сохранить',
        'templateProfile.saving': 'Сохранение...',
        'templateProfile.cancel': 'Отмена',
        'templateProfile.useTemplate': 'Использовать шаблон',
        'templateProfile.visibility': 'Видимость',
        'templateProfile.public': 'Публичный',
        'templateProfile.private': 'Приватный',
        'templateProfile.createdAt': 'Создан',
        'templateProfile.previewTitle': 'Пример карточки',
        'templateProfile.flipHint': 'Нажмите, чтобы перевернуть',
        'templateProfile.fields': 'Поля',
        'templateProfile.front': 'Лицевая сторона',
        'templateProfile.back': 'Обратная сторона',
        'templateProfile.fieldLabel': 'Метка',
        'templateProfile.fieldHelpText': 'Подсказка',
        'templateProfile.fieldName': 'Ключ поля',
        'templateProfile.fieldType': 'Тип',
        'templateProfile.fieldSide': 'Сторона',
        'templateProfile.addField': 'Добавить необязательное поле',
        'templateProfile.addFieldButton': 'Добавить поле',
        'templateProfile.fieldNamePlaceholder': 'например, primer',
        'templateProfile.fieldLabelPlaceholder': 'например, Пример',
        'templateProfile.fieldHelpTextPlaceholder': 'Подсказка для учащихся',
        'templateProfile.namePlaceholder': 'Название шаблона',
        'templateProfile.descriptionPlaceholder': 'Опишите шаблон',
        'templateProfile.noDescription': 'Без описания',
        'templateProfile.safeChanges': 'Безопасно менять: имя, описание, видимость, метки, порядок и новые необязательные поля.',
        'templateProfile.noFrontFields': 'Нет полей на лицевой стороне',
        'templateProfile.noBackFields': 'Нет полей на обратной стороне',
        'templateProfile.moveUp': 'Вверх',
        'templateProfile.moveDown': 'Вниз',
        'templateProfile.moveToBack': 'На обратную',
        'templateProfile.moveToFront': 'На лицевую',
        'templateProfile.fieldRequiredError': 'Нужно указать ключ и метку поля.',
        'templateProfile.fieldDuplicateError': 'Поле с таким ключом уже есть.',
        'templateProfile.nameRequiredError': 'Нужно указать название шаблона.',
        'templateProfile.typeText': 'Текст',
        'templateProfile.typeLongText': 'Длинный текст',
        'templateProfile.typeMarkdown': 'Markdown',
        'templateProfile.typeImage': 'Изображение',
        'templateProfile.typeAudio': 'Аудио',
        'templateProfile.typeVideo': 'Видео',
        'settings.mode': 'Режим',
        'settings.accent': 'Акцент',
        'settings.confirmDeleteTitle': 'Удалить аккаунт',
        'settings.confirmDeleteMessage': 'Вы уверены, что хотите удалить свой аккаунт? Это действие нельзя отменить.',
        'settings.confirmDeleteButton': 'Удалить аккаунт',
        'settings.cancelButton': 'Отмена',
        'visualBuilder.frontSide': 'Лицевая сторона',
        'visualBuilder.backSide': 'Обратная сторона',
        'visualBuilder.frontSideRu': 'Передняя сторона карты',
        'visualBuilder.backSideRu': 'Задняя сторона карты',
        'visualBuilder.moveUp': 'Вверх',
        'visualBuilder.moveDown': 'Вниз',
        'visualBuilder.removeField': 'Удалить поле',
    }
};

@Injectable({ providedIn: 'root' })
export class I18nService {
    private readonly storageKey = 'mnema_language';
    private _languageSubject: BehaviorSubject<Language>;

    currentLanguage$: Observable<Language>;

    constructor() {
        const saved = localStorage.getItem(this.storageKey) as Language | null;
        const initial: Language = (saved === 'en' || saved === 'ru') ? saved : 'en';
        this._languageSubject = new BehaviorSubject<Language>(initial);
        this.currentLanguage$ = this._languageSubject.asObservable();
    }

    get currentLanguage(): Language {
        return this._languageSubject.value;
    }

    setLanguage(lang: Language): void {
        this._languageSubject.next(lang);
        localStorage.setItem(this.storageKey, lang);
    }

    translate(key: string): string {
        const lang = this.currentLanguage;
        return translations[lang][key] || key;
    }

    t(key: string): string {
        return this.translate(key);
    }
}
